<!DOCTYPE html><html lang="en-CA" data-schema="planetaryrestorationarchive.com/ref/crypto/sol/custom/gpt/rare/peace/engineer/hybrid">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Canada Food & Water Sovereignty Guide (2025) â€” Offlineâ€‘First, WebLLM & Habiticaâ€‘Ready</title>
  <meta name="description" content="Ultra longâ€‘form, featureâ€‘rich guide to food and water sovereignty for Canada. Offlineâ€‘first PWA with animated starfield, WebLLM chat, Habitica task sync, IndexedDB notes, calculators, legal context, practical homestead and community playbooks." />
  <meta name="keywords" content="food sovereignty, water sovereignty, Canada, indigenous water rights, rainwater harvesting, emergency water, drought, seed saving, SCAP, AgriStability, AgriInvest, hardiness zones, WebLLM, Habitica, IndexedDB, offline PWA" />
  <meta name="presentation-schema" content="planetaryrestorationarchive.com/ref/crypto/sol/custom/gpt/rare/peace/engineer/hybrid" />
  <link rel="canonical" href="https://planetaryrestorationarchive.com/ref/crypto/sol/custom/gpt/rare/peace/engineer/hybrid" />
  <meta property="og:title" content="Canada Food & Water Sovereignty Guide (2025)" />
  <meta property="og:description" content="Offlineâ€‘first PWA guide with calculators, checklists, law & policy context, WebLLM chat, and Habitica sync." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_CA" />
  <meta name="twitter:card" content="summary_large_image" />  <!-- PWA-ish: data URL manifest created at runtime via JS for a single-file app -->  <link id="dynamic-manifest" rel="manifest" href="data:application/json,{&quot;name&quot;:&quot;Canada Food & Water Sovereignty Guide&quot;,&quot;short_name&quot;:&quot;Sovereignty&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;background_color&quot;:&quot;#0b0f17&quot;,&quot;theme_color&quot;:&quot;#0b0f17&quot;,&quot;icons&quot;:[]}" />  <style>
    :root{
      --bg:#0b0f17;
      --fg:#e6eef7;
      --muted:#9bb0c9;
      --accent:#8ae3ff;
      --good:#5BE37E;
      --warn:#FFD166;
      --bad:#FF6B6B;
      --panel:#121827;
      --panel-2:#0e1422;
      --ink:#0d111a;
      --link:#8ae3ff;
      --link-visited:#a1b6ff;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      color-scheme: dark;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";}
    a{color:var(--link)} a:visited{color:var(--link-visited)}
    header.site{
      position:sticky;top:0;z-index:6;
      background:linear-gradient(180deg,rgba(11,15,23,.85),rgba(11,15,23,.55));
      -webkit-backdrop-filter:saturate(120%) blur(8px); backdrop-filter:saturate(120%) blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06)
    }
    header .wrap{display:flex;gap:14px;align-items:center;padding:10px 16px;max-width:1200px;margin:auto}
    .brand{font-weight:700;letter-spacing:.3px}
    nav.toc{overflow:auto;white-space:nowrap}
    nav.toc a{margin-right:14px;text-decoration:none;padding:6px 10px;border-radius:20px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    main{max-width:1200px;margin:0 auto;padding:18px}
    .hero{position:relative;border-radius:16px;background:linear-gradient(180deg, rgba(24,33,56,.75), rgba(10,14,24,.75));box-shadow:var(--shadow);overflow:hidden}
    .hero .inner{position:relative;z-index:1;padding:24px}
    .eyebrow{font:700 12px/1 var(--font,system-ui);text-transform:uppercase;letter-spacing:1.1px;color:var(--muted)}
    h1{font-size:clamp(28px, 3vw, 40px);margin:.3em 0 .2em}
    h2{font-size:clamp(22px,2.2vw,28px);margin:1.2em 0 .4em;border-bottom:1px solid rgba(255,255,255,.08);padding-bottom:6px}
    h3{font-size:clamp(18px,1.9vw,22px);margin:1em 0 .3em}
    section.panel{background:var(--panel);box-shadow:var(--shadow);border:1px solid rgba(255,255,255,.06);border-radius:14px;margin:18px 0;padding:18px}
    .grid{display:grid;gap:16px}
    @media(min-width:920px){.grid.cols-2{grid-template-columns:1.1fr 1fr}.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    .kicker{color:var(--muted)}
    .chip{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);font-size:12px;margin-right:6px}
    .tag-good{border-color:rgba(91,227,126,.35);background:rgba(91,227,126,.08)}
    .tag-warn{border-color:rgba(255,209,102,.35);background:rgba(255,209,102,.08)}
    .tag-bad{border-color:rgba(255,107,107,.35);background:rgba(255,107,107,.08)}
    details{background:var(--panel-2);border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);border-radius:12px;padding:10px 12px}
    details > summary{cursor:pointer}
    .toolbar{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0}
    button, .btn{cursor:pointer;background:linear-gradient(180deg,#243148,#152033);color:var(--fg);border:1px solid rgba(255,255,255,.12);padding:10px 14px;border-radius:10px}
    button:disabled{opacity:.6;cursor:not-allowed}
    input,select,textarea{background:#0f1525;color:var(--fg);border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:10px;width:100%}
    label{font-size:13px;color:var(--muted);display:block;margin:6px 0 4px}
    .footnote{font-size:12.5px;color:var(--muted)}
    .ref{font-size:12px;color:var(--muted)}
    .notice{padding:10px 12px;border:1px dashed rgba(255,255,255,.15);border-radius:12px;background:rgba(255,255,255,.05)}
    .callout{border-left:3px solid var(--accent);padding-left:12px;margin:12px 0}
    .tw{opacity:.8}
    .starfield{position:absolute;inset:0;z-index:0;filter:contrast(110%) brightness(110%)}
    footer{opacity:.85;font-size:13px;margin:60px 0 40px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;background:#0b1222;border:1px solid rgba(255,255,255,.12);padding:2px 6px;border-radius:6px}
    .ref-toggle{cursor:pointer; font-size:13px; opacity:.8}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:.95em}
    .hl{background:rgba(138,227,255,.16);padding:0 .25em;border-radius:.3em}
  </style>  <script>
  // --- Service Worker (inline via Blob for one-file offline) ---
  (function registerSW(){
    if(!('serviceWorker' in navigator)) return;
    const swCode = `
      const CACHE = 'sovereignty-v1';
      self.addEventListener('install', e=>{
        e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./'])).then(()=>self.skipWaiting()));
      });
      self.addEventListener('activate', e=>{ e.waitUntil(self.clients.claim()); });
      self.addEventListener('fetch', e=>{
        const req = e.request;
        // Network-first for CDN libraries; cache-first for same-origin
        if(new URL(req.url).origin === location.origin){
          e.respondWith(caches.match(req).then(r=> r || fetch(req).then(resp=>{
            const copy = resp.clone(); caches.open(CACHE).then(c=>c.put(req, copy)); return resp;
          })));
        }else{
          e.respondWith(fetch(req).catch(()=>caches.match(req)));
        }
      });
    `;
    const blob = new Blob([swCode], {type:'text/javascript'});
    const url = URL.createObjectURL(blob);
    navigator.serviceWorker.register(url).catch(console.warn);
  })();

  // --- IndexedDB tiny helper (no external libs) ---
  const DB = (() => {
    let db;
    function open(){
      return new Promise((resolve, reject)=>{
        const req = indexedDB.open('sovereignty-db', 2);
        req.onupgradeneeded = e => {
          db = e.target.result;
          if(!db.objectStoreNames.contains('notes')) db.createObjectStore('notes',{keyPath:'id'});
          if(!db.objectStoreNames.contains('settings')) db.createObjectStore('settings',{keyPath:'key'});
          if(!db.objectStoreNames.contains('queue')) db.createObjectStore('queue',{keyPath:'id', autoIncrement:true});
          if(!db.objectStoreNames.contains('clips')) db.createObjectStore('clips',{keyPath:'id', autoIncrement:true});
          if(!db.objectStoreNames.contains('catalog')) db.createObjectStore('catalog',{keyPath:'id'});
        };
        req.onsuccess = () => { db = req.result; resolve(db); }
        req.onerror = () => reject(req.error);
      });
    }
    async function put(store, value){
      db || await open();
      return new Promise((resolve,reject)=>{
        const tx = db.transaction(store, 'readwrite');
        tx.objectStore(store).put(value);
        tx.oncomplete = () => resolve(value);
        tx.onerror = () => reject(tx.error);
      });
    }
    async function get(store, key){
      db || await open();
      return new Promise((resolve,reject)=>{
        const tx = db.transaction(store, 'readonly');
        const r = tx.objectStore(store).get(key);
        r.onsuccess = () => resolve(r.result);
        r.onerror = () => reject(r.error);
      });
    }
    async function all(store){
      db || await open();
      return new Promise((resolve,reject)=>{
        const tx = db.transaction(store, 'readonly');
        const r = tx.objectStore(store).getAll();
        r.onsuccess = () => resolve(r.result||[]);
        r.onerror = () => reject(r.error);
      });
    }
    return { open, put, get, all };
  })();
  </script></head>
<body>  <!-- Cinematic, photorealistic starfield --><canvas id="stars" class="starfield" aria-hidden="true"></canvas>

  <script>
  (function starfield(){
    const c = document.getElementById('stars');
    const ctx = c.getContext('2d', { alpha:true });
    let w,h, stars=[], meteor=null, last=0;
    function reset(){
      w = c.width = innerWidth; h = c.height = innerHeight*0.75;
      stars = Array.from({length: Math.min(1200, Math.floor(w*h/1800))}, ()=> spawnStar());
    }
    function rand(a,b){ return a + Math.random()*(b-a); }
    function spawnStar(){
      const depth = Math.pow(Math.random(), 2.2); // more faint stars than bright
      return {
        x: Math.random()*w,
        y: Math.random()*h,
        z: depth,
        base: rand(.3,1),
        tw: rand(.2,1.2),
        hue: rand(200, 230) + rand(-12,12), // blue-white bias
        size: (1-depth)*1.4 + .2,
        vel: rand(.02, .15)
      };
    }
    function spawnMeteor(){
      meteor = {
        x: rand(-w*0.1, w*1.1),
        y: rand(-h*0.2, h*0.2),
        vx: rand(-1.6, -0.4),
        vy: rand(.8, 1.6),
        life: 0, max: rand(700, 1300)
      };
    }
    function frame(ts){
      const dt = ts - last; last = ts;
      ctx.clearRect(0,0,w,h);

      // Nebula-ish gradient
      const g = ctx.createRadialGradient(w*.7, h*.2, 10, w*.5, h*.4, Math.max(w,h));
      g.addColorStop(0, 'rgba(100,130,200,.08)');
      g.addColorStop(1, 'rgba(5,8,14,0)');
      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

      // Stars
      for(const s of stars){
        s.base += (Math.random()-.5)*0.03;
        const twinkle = 0.65 + 0.35*Math.sin((s.base*6.28)*s.tw);
        const brightness = Math.min(1, Math.max(0, twinkle*s.z + 0.05));
        ctx.beginPath();
        ctx.fillStyle = `hsla(${s.hue}, 70%, ${70*brightness+20}%, ${.75*brightness+.05})`;
        ctx.arc(s.x, s.y, s.size*brightness, 0, Math.PI*2);
        ctx.fill();
        s.y += s.vel * (1.2 - s.z);
        if(s.y>h){ s.y = -1; s.x = Math.random()*w; }
      }

      // Meteor occasionally
      if(!meteor && Math.random()<0.002) spawnMeteor();
      if(meteor){
        ctx.strokeStyle='rgba(255,255,255,.5)';
        ctx.lineWidth=2;
        ctx.beginPath();
        ctx.moveTo(meteor.x, meteor.y);
        ctx.lineTo(meteor.x - meteor.vx*12, meteor.y - meteor.vy*12);
        ctx.stroke();
        meteor.x += meteor.vx; meteor.y += meteor.vy; meteor.life += dt;
        if(meteor.life>meteor.max) meteor=null;
      }
      requestAnimationFrame(frame);
    }
    addEventListener('resize', reset, {passive:true});
    reset(); requestAnimationFrame(frame);
  })();
  </script>  <header class="site">
    <div class="wrap">
      <div class="brand">ğŸ‡¨ğŸ‡¦ Sovereignty Guide</div>
      <nav class="toc" aria-label="Table of contents">
        <a href="#start">Start</a>
        <a href="#law">Law & Policy</a>
        <a href="#water">Water</a>
        <a href="#food">Food</a>
        <a href="#calculators">Calculators</a>
        <a href="#habitica">Habitica</a>
        <a href="#webllm">WebLLM</a>
        <a href="#offline">Offline & Data</a>
        <a href="#refs">References</a>
      </nav>
    </div>
  </header>  <main>
    <section id="start" class="hero" role="region" aria-label="Intro">
      <div class="inner">
        <div class="eyebrow">Planetary Restoration Archive â€” hybrid presentation schema</div>
        <h1>Food & Water Sovereignty for Canada (2025 edition)</h1>
        <p class="kicker">A lovingly nerdy fieldâ€‘guide to practical autonomy: safe water, reliable food, resilient systems. Offlineâ€‘first. Indexed. Hackable.</p>
        <div class="toolbar">
          <button id="installBtn" title="Install to home screen (PWA)">ğŸ“² Install</button>
          <button id="saveClipBtn">ğŸ”– Save this page to IndexedDB</button>
          <label class="pill"><input type="checkbox" id="reduceMotion"> Reduce motion</label>
          <span class="pill">ğŸ” <span id="searchCount">0</span> results</span>
          <input id="searchBox" placeholder="Search this guide (offline)â€¦" aria-label="Search guide"/>
        </div>
        <div class="notice">
          This is a working guide. Use it to plan gardens, model water storage, queue tasks to Habitica, and chat locally with an inâ€‘browser LLM (WebLLM). It runs fully offline after first load. For local laws and safety, rely on the cited sources and your local authorities.
        </div>
      </div>
    </section><section id="law" class="panel">
  <h2>1) Law & Policy Landscape</h2>
  <div class="grid cols-2">
    <div>
      <h3>Federal actors & frameworks</h3>
      <ul>
        <li><strong>Canada Water Agency (CWA)</strong>, a standalone federal agency headquartered in Winnipeg, coordinates freshwater programs and the Freshwater Action Plan. Address listed as 510â€‘234 Donald St., Winnipeg. It launched as an independent entity in OctÂ 2024 after Royal Assent of enabling legislation in JuneÂ 2024. î¨0î¨‚</li>
        <li><strong>Freshwater Action Plan</strong> funds watershed initiatives (e.g., Lake Winnipeg) and partners with Indigenous governments. î¨1î¨‚</li>
        <li><strong>Guidelines for Canadian Drinking Water Quality</strong> inform standards nationally, implemented by provinces/territories. î¨2î¨‚</li>
      </ul>

      <h3>First Nations water governance & current status</h3>
      <p>
        <strong>BillÂ Câ€‘61 (First Nations Clean Water Act)</strong> was introduced DecÂ 11,Â 2023, progressed in 2024, then died on prorogation JanÂ 6,Â 2025; advocates continue to call for reâ€‘introduction. î¨3î¨‚
      </p>
      <p>
        <strong>Longâ€‘term drinking water advisories (LTDWAs)</strong> on public systems on reserve remain a live issue. ISC reported 38 LTDWAs in 36 communities as of OctÂ 14,Â 2025, with 149 lifted since 2015; earlier notes in midâ€‘2025 referenced 35â€“37 active depending on date. Track the current numbers at ISCâ€™s dashboard. î¨4î¨‚
      </p>
      <details><summary>Context & accountability</summary>
        <p class="tw">Auditor General (2021) flagged persistent gaps; recent QP notes (JuneÂ 2025) highlight 148 LTDWAs lifted by then and plans for the remaining systems. These numbers shift; always check the latest ISC data. î¨5î¨‚</p>
      </details>
    </div>
    <div>
      <h3>Standards that matter for sovereignty projects</h3>
      <ul>
        <li><strong>CSA B805/ICCÂ 805 (2018â†’2022)</strong> â€” design/operation of rainwater harvesting systems for potable & nonâ€‘potable use; recognized National Standard of Canada. î¨6î¨‚</li>
        <li><strong>CSAÂ B128 series</strong> â€” nonâ€‘potable water systems design, installation, maintenance, and packaged reuse systems. î¨7î¨‚</li>
        <li><strong>Guidance on reclaimed water</strong> â€” Health Canada overview linking to CSAÂ B128 for plumbing requirements. î¨8î¨‚</li>
      </ul>

      <h3>Seeds & the right to save</h3>
      <p>Canada updated its Plant Breedersâ€™ Rights Act in 2015 to align with UPOV â€™91, explicitly recognizing a <em>farmersâ€™ privilege</em> to save/reuse seed of protected varieties on oneâ€™s own farm, while strengthening breedersâ€™ rights and enabling future regulatory changes. Follow CFIA for official guidance and any regulatory amendments. î¨9î¨‚</p>
      <p>Debates continue around farmâ€‘saved seed royalties and scope of the privilege; keep an eye on policy developments. î¨10î¨‚</p>
    </div>
  </div>

  <div class="callout">
    <strong>Reality check:</strong> Water, land, and agriculture are shared jurisdictions. For any project (cistern, well, greywater, livestock, direct sales), verify your provincial/territorial codes and municipal bylaws, then design to the stricter rule.
  </div>
</section>

<section id="water" class="panel">
  <h2>2) Water Sovereignty</h2>
  <div class="grid cols-2">
    <div>
      <h3>Emergency water: how much, how to store</h3>
      <ul>
        <li><strong>Minimum</strong>: plan for <span class="hl">2Â L per person per day for drinking</span> plus another 2Â L for cooking & sanitation, i.e. ~<span class="hl">4Â L/person/day</span>. Pets need their share too. î¨11î¨‚</li>
        <li>Store in foodâ€‘grade containers; rotate at least annually; keep a way to <em>treat</em> new water during outages (boiling or safe chemical disinfection). î¨12î¨‚</li>
      </ul>
      <details><summary>Boiling & disinfection quickâ€‘ref</summary>
        <ul>
          <li><strong>Boil</strong> water at a rolling boil for <span class="hl">1Â minute</span>. î¨13î¨‚</li>
          <li><strong>Bleach (household ~5â€“6% sodium hypochlorite)</strong>: ~2 drops per litre (~8 drops per US gallon), stir, stand 30Â min; double if cloudy/cold. Use unscented bleach only. Local health authorities provide precise charts. î¨14î¨‚</li>
          <li>For sanitation surfaces during advisories, public health guidance specifies dilution ratios (e.g., 5Â mL per litre). Follow local instructions. î¨15î¨‚</li>
        </ul>
      </details>
    </div>
    <div>
      <h3>Rainwater, cisterns & greywater</h3>
      <p>Design to CSA B805/ICCÂ 805 for rainwater harvesting and CSAÂ B128 for nonâ€‘potable systems; these standards connect plumbing, materials, treatment levels, and endâ€‘uses across Canada. î¨16î¨‚</p>
      <ul>
        <li>Nonâ€‘potable uses (toilets, irrigation) are common. Potable use demands robust treatment trains and permits where allowed.</li>
        <li>Greywater reuse is governed provincially; packaged systems are covered by CSAÂ B128.3 performance requirements. î¨17î¨‚</li>
      </ul>
      <details><summary>Design notes</summary>
        <ul>
          <li>Roof materials matter; firstâ€‘flush diverters, sedimentation, filtration, and disinfection are typical. (See CSA B805/ICCÂ 805 checklists). î¨18î¨‚</li>
          <li>Prefer NSF/ANSIâ€‘certified treatment chemicals/components where applicable. î¨19î¨‚</li>
        </ul>
      </details>
    </div>
  </div>

  <div class="grid cols-2">
    <div>
      <h3>Private wells (new or existing)</h3>
      <p>Test for bacteria several times per year and after flooding or maintenance; disinfect when needed following your provincial public health instructions (well shocking calculators and SOPs exist). î¨20î¨‚</p>
      <details><summary>When to shock chlorinate a well</summary>
        <p class="tw">After maintenance, when positive for coliform/E.Â coli, or after flood intrusionâ€”follow your health unitâ€™s well disinfection procedure (dosage depends on diameter/volume). î¨21î¨‚</p>
      </details>
    </div>
    <div>
      <h3>Drought & watershed reality</h3>
      <p>Canadian Drought Monitor maps show large swings; 2025 brought persistent drought in parts of the Prairies and Central region, with BC watersheds facing repeated stress. Expect variability; plan storage and demandâ€‘side conservation. î¨22î¨‚</p>
      <p>BC uses a 6â€‘level drought scale with corresponding actionsâ€”farmers and municipalities sometimes enter waterâ€‘sharing agreements in severe seasons. î¨23î¨‚</p>
    </div>
  </div>

  <h3>Rights of Nature (local precedent)</h3>
  <p>The Magpie River (Muteshekauâ€‘shipu) in QuÃ©bec was recognized via twin 2021 resolutions by the Innu Council of Ekuanitshit and Minganie RCM, asserting legal personhood and naming guardiansâ€”Canadaâ€™s first such case. î¨24î¨‚</p>
</section>

<section id="food" class="panel">
  <h2>3) Food Sovereignty</h2>
  <div class="grid cols-2">
    <div>
      <h3>Growing for your place</h3>
      <p>Start with your <strong>Plant Hardiness Zone</strong> (NRCan) and frost windows; many Canadian locales now fall a halfâ€‘zone warmer relative to older baselines. î¨25î¨‚</p>
      <details><summary>Hardiness & frost pointers</summary>
        <ul>
          <li>Use the official Plant Hardiness map (NRCan) for a Canadian index and/or USDAâ€‘style minima. î¨26î¨‚</li>
          <li>For planning, combine local records with frostâ€‘date tools; verify with your own microclimate. î¨27î¨‚</li>
        </ul>
      </details>
      <h3>Safe preserving</h3>
      <p>Pressureâ€‘can <em>lowâ€‘acid</em> foods (meats, most veg); waterâ€‘bath only for highâ€‘acid items and proper acidified recipes; use tested processes to avoid botulism. î¨28î¨‚</p>
    </div>
    <div>
      <h3>Policy & programs that can help</h3>
      <p><strong>SCAP (2023â€“2028)</strong> is a $3.5B federalâ€‘provincialâ€‘territorial partnership spanning risk management (AgriStability/AgriInvest), environmental programs, and innovation. If youâ€™re scaling beyond a garden, explore eligibility. î¨29î¨‚</p>
      <ul>
        <li><strong>AgriStability</strong> â€” incomeâ€‘decline protection; annual enrolment & fees. Deadlines vary by admin. î¨30î¨‚</li>
        <li><strong>AgriInvest</strong> â€” matchable savings for small margin declines; note updated postâ€‘2024 deadlines and rules publicized in 2025. î¨31î¨‚</li>
      </ul>
    </div>
  </div>

  <details>
    <summary>Microâ€‘playbooks (home, community, rural)</summary>
    <div class="grid cols-3">
      <div>
        <h4>Home & apartment</h4>
        <ul>
          <li>Windowsill greens: microgreens, pea shoots (10â€“16 days).</li>
          <li>Balcony: subâ€‘irrigated planters; dwarf tomatoes, peppers in fabric pots; drip lines from a rain tote (nonâ€‘potable). Design per CSA B805 for safe harvesting setup. î¨32î¨‚</li>
        </ul>
      </div>
      <div>
        <h4>Community</h4>
        <ul>
          <li>Seed library + workshop series: teach varietal selection, seed cleaning, and legal basics under PBR/UPOV (no sales of protected seed; farmâ€‘saved for own use only). î¨33î¨‚</li>
          <li>Shared wash/pack with potable standard; post a boilâ€‘water SOP in case of advisories. î¨34î¨‚</li>
        </ul>
      </div>
      <div>
        <h4>Rural & remote</h4>
        <ul>
          <li>Coldâ€‘season calories: potatoes, oats, pulses; root cellar discipline.</li>
          <li>Redundant water: well + cistern + surface source with gravity sand/UV backup designed to applicable standards. î¨35î¨‚</li>
        </ul>
      </div>
    </div>
  </details>
</section>

<section id="calculators" class="panel">
  <h2>4) Tools & Calculators (offline)</h2>
  <div class="grid cols-2">
    <div>
      <h3>Water Storage Planner</h3>
      <label>People in household</label><input id="wPeople" type="number" min="1" value="3">
      <label>Days to cover</label><input id="wDays" type="number" min="1" value="7">
      <label>Litres per person per day</label><input id="wLppd" type="number" step="0.1" value="4">
      <label>Pets total (litres per day)</label><input id="wPets" type="number" step="0.1" value="1">
      <div class="toolbar"><button id="wCalc">Calculate</button></div>
      <div id="wOut" class="notice mono">â€”</div>
      <p class="footnote">Rule of thumb from Canadian emergency guidance: ~2Â L for drinking + ~2Â L for cooking/sanitation per person per day; add pet needs. î¨36î¨‚</p>
    </div>
    <div>
      <h3>Seed Starting Window (approx.)</h3>
      <label>Last spring frost date (YYYYâ€‘MMâ€‘DD)</label><input id="frost" type="date">
      <label>Crop (days to transplant)</label>
      <select id="crop">
        <option value="28">Tomato (28â€“42 days)</option>
        <option value="35">Pepper (35â€“56 days)</option>
        <option value="21">Brassica (21â€“35 days)</option>
        <option value="14">Leafy greens (14â€“28 days)</option>
      </select>
      <div class="toolbar"><button id="sCalc">Plan</button></div>
      <div id="sOut" class="notice mono">â€”</div>
      <p class="footnote">Use NRCan hardiness zones & local frost histories to refine. î¨37î¨‚</p>
    </div>
  </div>

  <details>
    <summary>Well Shock Chlorination (very rough estimator)</summary>
    <div class="notice">
      This is an <em>illustrative</em> volume calculator; <strong>always</strong> follow your health unitâ€™s official well disinfection tool and instructions (Ontario Public Health provides a calculator and stepâ€‘byâ€‘step). î¨38î¨‚
    </div>
    <label>Well diameter (cm)</label><input id="wellD" type="number" value="15">
    <label>Water column height (m)</label><input id="wellH" type="number" value="10">
    <div class="toolbar"><button id="wellCalc">Estimate volume & bleach dose</button></div>
    <div id="wellOut" class="notice mono">â€”</div>
  </details>

  <script>
    const $=s=>document.querySelector(s);
    $('#wCalc').onclick=()=>{
      const p=+$('#wPeople').value||0, d=+$('#wDays').value||0, l=+$('#wLppd').value||0, pets=+$('#wPets').value||0;
      const total = p*d*l + d*pets;
      const jugs4L = Math.ceil(total/4);
      const barrels200L = Math.ceil(total/200);
      $('#wOut').textContent = `Total: ${total.toFixed(1)} L  â‰ˆ ${jugs4L} x 4â€‘L jugs  or  ${barrels200L} x 200â€‘L barrels`;
    };
    $('#sCalc').onclick=()=>{
      const dt = new Date($('#frost').value); if(!+dt){ $('#sOut').textContent='Enter a frost date.'; return;}
      const lead = +$('#crop').value;
      const start = new Date(dt); start.setDate(start.getDate()-lead);
      $('#sOut').textContent = `Start seeds indoors around ${start.toISOString().slice(0,10)} for transplants after ${dt.toISOString().slice(0,10)} (weather permitting).`;
    };
    $('#wellCalc').onclick=()=>{
      const d = +$('#wellD').value/100, h=+$('#wellH').value; // m, m
      const vol = Math.PI*Math.pow(d/2,2)*h; // mÂ³
      const litres = vol*1000;
      // Very rough: target ~50 mg/L free chlorine initial shock â†’ 50 mg/L * litres = mg; for 5.25% bleach ~52,500 mg per mL
      const mgNeeded = 50*litres;
      const mL = mgNeeded/52500;
      $('#wellOut').textContent = `Approx volume ${litres.toFixed(0)} L. A rough starting dose for shock chlorination is ~${mL.toFixed(1)} mL of 5â€“6% unscented bleach per 1,000 L (scale proportionally), then follow your health unitâ€™s official procedure for contact time and flushing.`;
    };
    // search
    $('#searchBox').addEventListener('input', e=>{
      const q = e.target.value.trim().toLowerCase();
      let count=0;
      document.querySelectorAll('main p, main li, main h2, main h3, main h4').forEach(el=>{
        el.innerHTML = el.textContent.replace(/\u2060/g,''); // cleanup
        if(q && el.textContent.toLowerCase().includes(q)){
          count++;
          const re = new RegExp('('+q.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')+')','ig');
          el.innerHTML = el.textContent.replace(re,'<mark class="hl">$1</mark>');
        }
      });
      $('#searchCount').textContent = count;
    });
    // reduce motion
    $('#reduceMotion').addEventListener('change', e=>{
      document.querySelector('#stars').style.display = e.target.checked ? 'none':'block';
    });
    // install prompt (PWA)
    let deferredPrompt=null;
    window.addEventListener('beforeinstallprompt', (e)=>{
      e.preventDefault(); deferredPrompt = e;
      $('#installBtn').disabled = false;
    });
    $('#installBtn').onclick = async ()=>{
      if(deferredPrompt){ deferredPrompt.prompt(); deferredPrompt=null;}
      else alert('Tip: use your browser â€œInstall/Add to Home Screenâ€ for this guide.');
    };
    // save snapshot to IndexedDB
    $('#saveClipBtn').onclick=async ()=>{
      const html = document.documentElement.outerHTML.slice(0, 200000); // partial snapshot
      await DB.put('clips', { id: Date.now(), title: document.title, html });
      alert('Saved a local snapshot in IndexedDB â†’ clips');
    };
  </script>
</section>

<section id="habitica" class="panel">
  <h2>5) Habitica: Gamify Your Sovereignty Sprint</h2>
  <p>Queue tasks here; when online, theyâ€™ll sync to your Habitica account via the API. Your credentials are stored locally in IndexedDB and used only from this page.</p>
  <div class="grid cols-2">
    <div>
      <h3>Connect</h3>
      <label>User ID</label><input id="hUser">
      <label>API Token</label><input id="hToken" type="password">
      <div class="toolbar">
        <button id="hSave">Save creds</button>
        <button id="hTest">Test auth</button>
      </div>
      <p class="footnote">Habitica uses headers <span class="kbd">x-api-user</span> and <span class="kbd">x-api-key</span>. See API docs. î¨39î¨‚</p>
    </div>
    <div>
      <h3>Oneâ€‘click Task Packs</h3>
      <div class="toolbar">
        <button data-pack="water72">ğŸ’§ 72â€‘Hour Water Build</button>
        <button data-pack="garden90">ğŸŒ± 90â€‘Day Garden Sprint</button>
        <button data-pack="preserve">ğŸ¥« Safe Preserving Checklist</button>
      </div>
      <div id="hStatus" class="notice mono">â€”</div>
    </div>
  </div>

  <script>
    const Habitica = {
      async creds(){ return (await DB.get('settings','habitica'))?.value || {user:'', token:''}; },
      async save(u,t){ await DB.put('settings',{key:'habitica', value:{user:u, token:t}}); },
      async postTask(task){
        const {user, token} = await Habitica.creds();
        if(!user || !token){ throw new Error('Missing Habitica credentials'); }
        const body = JSON.stringify(task);
        const res = await fetch('https://habitica.com/api/v3/tasks/user', {
          method:'POST',
          headers:{
            'Content-Type':'application/json',
            'x-api-user': user,
            'x-api-key': token
          },
          body
        });
        if(!res.ok) throw new Error('Habitica error: '+res.status);
        return res.json();
      }
    };
    $('#hSave').onclick = async ()=>{
      await Habitica.save($('#hUser').value.trim(), $('#hToken').value.trim());
      $('#hStatus').textContent = 'Saved locally.';
    };
    $('#hTest').onclick = async ()=>{
      try{
        const {user, token} = await Habitica.creds();
        const res = await fetch('https://habitica.com/api/v3/user', {
          headers:{'x-api-user':user,'x-api-key':token}
        });
        $('#hStatus').textContent = res.ok ? 'âœ… Auth OK' : 'âš ï¸ Auth failed ('+res.status+')';
      }catch(e){ $('#hStatus').textContent='Offline or error.'; }
    };
    document.querySelectorAll('[data-pack]').forEach(btn=>{
      btn.addEventListener('click', async ()=>{
        const pack = btn.dataset.pack;
        const tasks = {
          water72: [
            {type:'todo', text:'Compute household water (4 L/person/day + pets) for 3 days', priority:1.5},
            {type:'todo', text:'Procure food-grade containers + tap adapters', priority:1.2},
            {type:'todo', text:'Prepare boil/bleach SOP card by sink', priority:1.2},
            {type:'daily', text:'Rotate one container (FIFO) weekly', priority:1.3}
          ],
          garden90: [
            {type:'todo', text:'Map beds + choose varieties by hardiness zone', priority:1.3},
            {type:'todo', text:'Start seedlings per schedule', priority:1.2},
            {type:'daily', text:'Irrigate early, mulch to 5â€“8 cm', priority:1.0},
            {type:'todo', text:'Set up rain barrel & first-flush diverter', priority:1.3}
          ],
          preserve: [
            {type:'todo', text:'Audit gear: pressure canner (gauge tested), jars, new lids', priority:1.3},
            {type:'todo', text:'Pick tested recipes (high-acid vs low-acid)', priority:1.2},
            {type:'todo', text:'Label & log batches; first-in, first-out', priority:1.0}
          ]
        }[pack];
        try{
          for(const t of tasks){ await Habitica.postTask(t); }
          $('#hStatus').textContent = 'âœ… Tasks created in Habitica.';
        }catch(e){
          // Queue offline
          await DB.put('queue',{pack, tasks, when:Date.now()});
          $('#hStatus').textContent = 'ğŸ“¦ Offline â€” tasks queued locally for later sync.';
        }
      });
    });
  </script>

  <p class="footnote">Task creation uses Habiticaâ€™s <span class="mono">/api/v3/tasks/user</span> endpoint. Credentials remain in your browser. î¨40î¨‚</p>
</section>

<section id="webllm" class="panel">
  <h2>6) WebLLM: Private, Onâ€‘Device Chat</h2>
  <p>This page can load a small openâ€‘weight model in your browser using WebGPU. First run downloads the model and caches it for offline use (if supported by your browser). If your device lacks WebGPU, youâ€™ll see a lightweight fallback noteâ€‘search instead. î¨41î¨‚</p>

  <div class="toolbar">
    <select id="modelSel" title="Choose a small model">
      <option value="Qwen2.5-0.5B-Instruct-q4f16_1-MLC">Qwen2.5â€‘0.5Bâ€‘Instruct (smallest)</option>
      <option value="Llama-3.2-1B-Instruct-q4f16_1-MLC">Llamaâ€‘3.2â€‘1Bâ€‘Instruct</option>
    </select>
    <button id="llmLoad">Load Model</button>
    <button id="llmUnload">Unload</button>
  </div>
  <div id="llmStatus" class="notice mono">WebLLM not loaded.</div>
  <div class="grid cols-2">
    <div>
      <textarea id="llmInput" rows="6" placeholder="Ask: Draft a 12â€‘week sovereignty sprint for Zone 5b with 600Â L water storage and two raised bedsâ€¦"></textarea>
      <div class="toolbar">
        <button id="llmSend">Send</button>
        <button id="llmStop">Stop</button>
      </div>
    </div>
    <div>
      <pre id="llmOut" class="notice mono" style="min-height:160px;white-space:pre-wrap">â€”</pre>
    </div>
  </div>

  <script type="module">
    let engine=null, aborter=null;
    const status = t=>document.querySelector('#llmStatus').textContent=t;
    async function loadWebLLM(){
      try{
        // Try CDN load
        const webllm = await import('https://esm.run/@mlc-ai/web-llm@0.2.79');
        const model = document.querySelector('#modelSel').value;
        engine = await webllm.CreateMLCEngine(model, {
          initProgressCallback: (p)=>status(`Loading ${Math.round(p.progress*100)}%`)
        });
        status('âœ… WebLLM ready: '+model);
      }catch(e){
        status('âš ï¸ Could not load WebLLM (offline or no WebGPU). Using local search fallback.');
        engine=null;
      }
    }
    document.querySelector('#llmLoad').onclick=loadWebLLM;
    document.querySelector('#llmUnload').onclick=()=>{engine=null; status('Unloaded');}
    document.querySelector('#llmSend').onclick=async ()=>{
      const prompt = document.querySelector('#llmInput').value.trim();
      if(!prompt){ return; }
      const out = document.querySelector('#llmOut'); out.textContent='';
      if(engine){
        aborter = new AbortController();
        for await (const chunk of await engine.chat.completions.create({
          messages:[{role:'system', content:'You are a concise Canadian food & water sovereignty assistant.'},{role:'user', content:prompt}],
          stream:true
        }, { signal: aborter.signal })){
          out.textContent += chunk.choices?.[0]?.delta?.content||'';
        }
      }else{
        // Fallback: naive keyword hunt across this document
        const text = document.body.innerText;
        const parts = text.split('\n').filter(x=>x.toLowerCase().includes(prompt.toLowerCase().slice(0,24)));
        out.textContent = parts.slice(0,24).join('\n\n') || 'No local matches. Try a simpler query.';
      }
    };
    document.querySelector('#llmStop').onclick=()=>{ try{ aborter?.abort(); }catch(e){} };
  </script>

  <p class="footnote">WebLLM runs on WebGPU; models like Qwen2.5â€‘0.5B/1B are suitable for browsers. First download is cached for offline reuse. î¨42î¨‚</p>
</section>

<section id="offline" class="panel">
  <h2>7) Offlineâ€‘First & Your Data</h2>
  <ul>
    <li>This single file registers a service worker to cache itself and any loaded assets for offline use.</li>
    <li>All notes, credentials, and queued tasks stay in your browser via IndexedDB.</li>
    <li>To export: open DevTools â†’ Application â†’ IndexedDB â†’ rightâ€‘click object stores to inspect/copy; or save a snapshot via â€œğŸ”– Save this page to IndexedDBâ€.</li>
  </ul>
  <details><summary>Ethical premise</summary>
    <p>The aim is agency: minimize dependence on brittle supply chains while respecting Indigenous water jurisdiction, local bylaws, and public health science. We want fewer empty promises and more full rain barrels.</p>
  </details>
</section>

<section id="refs" class="panel">
  <h2>References (tap to expand)</h2>
  <details>
    <summary class="ref-toggle">Water governance & advisories</summary>
    <ul class="ref">
      <li>Canada Water Agency launch, HQ & programs. î¨43î¨‚</li>
      <li>BillÂ Câ€‘61 status & background. î¨44î¨‚</li>
      <li>ISC LTDWA dashboard & stats snapshots 2025. î¨45î¨‚</li>
      <li>Drought context & BC actions. î¨46î¨‚</li>
    </ul>
  </details>
  <details>
    <summary class="ref-toggle">Standards & safety</summary>
    <ul class="ref">
      <li>CSA B805/ICCÂ 805 (rainwater) & CSAÂ B128 series (nonâ€‘potable/greywater). î¨47î¨‚</li>
      <li>Health Canada chlorine/NSF guidance. î¨48î¨‚</li>
      <li>Boil/disinfect guidance & provincial pages. î¨49î¨‚</li>
    </ul>
  </details>
  <details>
    <summary class="ref-toggle">Seeds & programs</summary>
    <ul class="ref">
      <li>CFIA on UPOV â€™91 & farmersâ€™ privilege; 2025 regulatory note. î¨50î¨‚</li>
      <li>SCAP, AgriStability/AgriInvest. î¨51î¨‚</li>
    </ul>
  </details>
  <details>
    <summary class="ref-toggle">Growing & preserving</summary>
    <ul class="ref">
      <li>NRCan Plant Hardiness map & 2025 update note. î¨52î¨‚</li>
      <li>Home canning safety & lowâ€‘acid pressure processing. î¨53î¨‚</li>
    </ul>
  </details>
  <details>
    <summary class="ref-toggle">Local AI & Habitica</summary>
    <ul class="ref">
      <li>WebLLM overview & usage. î¨54î¨‚</li>
      <li>Habitica API docs (headers & endpoints). î¨55î¨‚</li>
    </ul>
  </details>
</section>

<footer>
  <p>Â© 2025 â€¢ This guide is educational; it doesnâ€™t replace your local codes, Indigenous laws, or public health orders. Build beautifully, test your water, label your jars, be kind to future you.</p>
  <p class="tw">Schema: planetaryrestorationarchive.com/ref/crypto/sol/custom/gpt/rare/peace/engineer/hybrid (applied via <span class="mono">data-schema</span> & meta).</p>
</footer>

  </main>
</body>
</html><!-- 
Notes for Foster + Navi:
â€¢ The file is fully standalone: starfield, SW, IndexedDB, Habitica, and WebLLM hooks are all inline.
â€¢ WebLLM loads from a CDN when online; offline fallback is local text search. 
â€¢ If you want me to expand with more provincial modules (wells, rainwater, urban agriculture bylaws), say which province/city to prioritize next, and Iâ€™ll append a Part 2 section block.
-->î¨56î¨‚
